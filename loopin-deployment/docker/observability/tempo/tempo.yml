#server:
#  http_listen_port: 3200

distributor:
  receivers:
    otlp:
      protocols:
        grpc:
          endpoint: 0.0.0.0:4317   # â˜… ê¼­ ì§€ì •
        http:
          endpoint: 0.0.0.0:4318   # (HTTPë„ ì“´ë‹¤ë©´)

ingester:
  trace_idle_period: 10s
  max_block_bytes: 1_000_000
  max_block_duration: 5m

compactor:
  compaction:
    compaction_window: 1h
    max_block_bytes: 100_000_000
    block_retention: 1h
    compacted_block_retention: 10m

storage:
  trace:
    backend: local
    local:
      path: /tmp/tempo/blocks

metrics_generator:
  # í•„ìš”í•˜ë©´ ì»¬ë ‰ì…˜ ì£¼ê¸°Â·ë¼ë²¨ì„ registry ì•ˆì— ë„£ìŒ
  registry:
    collection_interval: 15s           # ê¸°ë³¸ 15 s
    external_labels:
      source: tempo
      cluster: docker-compose

  # ğŸ”‘ remote_write ëŠ” storage ì•„ë˜ë¡œ ì´ë™
  storage:
    path: /tmp/tempo/generator/wal     # WAL ì €ì¥ ìœ„ì¹˜
    remote_write:
      - url: http://prometheus:9090/api/v1/write
        send_exemplars: true           # (ì„ íƒ) ì˜ˆì œìš©
  traces_storage: # â˜… ìƒˆë¡œ ì¶”ê°€ â€” local-blocks ê°€ ì½ëŠ” WAL
    path: /tmp/tempo/generator/traces-wal

# í”„ë¡œì„¸ì„œ í™œì„±í™”ëŠ” overrides ì—ì„œ
overrides:
  metrics_generator_processors:
    - service-graphs
    - span-metrics
    - local-blocks